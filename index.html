<!DOCTYPE html>
<html lang="en">
  <head>
    <!--
      This is the page head - it contains info the browser uses to display the page
      You won't see what's in the head in the page
      Scroll down to the body element for the page content
    -->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://glitch.com/favicon.ico" />

    <!-- 
      This is an HTML comment
      You can write text in a comment and the content won't be visible in the page
    -->

    <title>REDCap Event Armer</title>

    <meta
      name="description"
      content="A simple way to set up REDCap Events and arms"
    />
    <meta name="robots" content="index,follow" />
    <meta property="og:title" content="Hello World!" />
    <meta
      property="og:description"
      content="A simple way to set up REDCap Events and arms"
    />
    <!-- Import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css" />

    <script type="module">
    </script>
    <!-- Import the webpage's javascript file -->
    <script src="/script.js" defer type="module"></script>
  </head>
  <body>
    <div class="wrapper">
      <h1>
        REDCap Event Arm Thingy
      </h1>
      <div class="armtable"
           data-controller="gridcopy">
        <div id = "armbuttons">
        </div>
        <table id="mapping_table"
               data-controller="check_storer"
               data-action="update->check_storer#store_checked_values">
        </table>
        <button
                data-action="gridcopy->copy">
          Copy selections from
        </button>
        <select id="arm_copy"
                data-target="gridcopy-copyFrom">
        </select>
      </div>
      
      <div class="inputs">
        <div class="arm_input">
          <label for="arm_list">
            Arms
          </label>
          <textarea id="arm_list"
                    name="as"
                    data-controller="urlsync arm-updater tablizer"
                    data-action="urlsync#update arm-updater#update tablizer#build_table"
                    data-param="arms"
                    data-radiocontainer="armbuttons"
                    data-tableid="mapping_table"
                    ></textarea>
        </div>
        <div class="event_input">
          <label for="event_list">
            Events
          </label>
          <textarea id="event_list"
                    name="es"
                    data-controller="urlsync tablizer"
                    data-action="urlsync#update tablizer#build_table"
                    data-tableid="mapping_table"
                    ></textarea>
        </div>

        <div class="instrument_input">
          <label for="instrument_list">
            Instruments
          </label>
          <textarea
                    id="instrument_list"
                    name="is"
                    data-controller="urlsync tablizer"
                    data-action="urlsync#update tablizer#build_table"
                    data-tableid="mapping_table"
                    ></textarea>
        </div>

      </div>
      
      <div id="outputs" data-controller="output" data-action="update->output#update">
        <div class="events_output">
          <a id="events_download" download="events.csv" href="#">Event list to upload to REDCap</a>
        </div>
        <div class="mapping_output">
          <a id="mapping_download" download="events.csv" href="#">Event-instrument mapping to upload to REDCap</a>
        </div>        
      </div>      
    </div>
  </body>
</html>
